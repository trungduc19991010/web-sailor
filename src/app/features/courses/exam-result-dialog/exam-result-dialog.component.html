<div class="exam-result-dialog">
  <!-- Header với gradient -->
  <div class="relative overflow-hidden rounded-t-lg" 
       [ngClass]="data.passed ? 'bg-gradient-to-r from-green-500 to-emerald-600' : 'bg-gradient-to-r from-red-500 to-rose-600'">
    <div class="absolute inset-0 opacity-10">
      <div class="absolute inset-0" style="background-image: radial-gradient(circle, white 1px, transparent 1px); background-size: 20px 20px;"></div>
    </div>
    
    <div class="relative p-8 text-center text-white">
      <!-- Icon kết quả -->
      <div class="flex justify-center mb-4">
        <div class="w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center">
          <mat-icon [ngClass]="getIconClass()" class="!text-white !text-6xl">
            {{ getResultIcon() }}
          </mat-icon>
        </div>
      </div>
      
      <h2 class="text-3xl font-bold mb-2">Kết quả bài thi</h2>
      <p class="text-lg text-white/90">{{ getResultMessage() }}</p>
    </div>
  </div>

  <!-- Content -->
  <div class="p-6">
    <!-- Điểm số lớn -->
    <div class="text-center mb-6">
      <div class="inline-block">
        <div [ngClass]="getScoreClass()" class="text-7xl font-bold mb-2">
          {{ data.percentage }}%
        </div>
        <div class="text-sm text-gray-600 uppercase tracking-wide">Điểm đạt được</div>
      </div>
    </div>

    <!-- Thống kê chi tiết -->
    <div class="grid grid-cols-2 gap-4 mb-6">
      <!-- Tổng số câu -->
      <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0">
            <mat-icon class="text-white">quiz</mat-icon>
          </div>
          <div class="flex-1 min-w-0">
            <p class="text-xs text-gray-600 mb-1">Tổng số câu</p>
            <p class="text-2xl font-bold text-blue-600">{{ data.totalQuestions }}</p>
          </div>
        </div>
      </div>

      <!-- Số câu đúng -->
      <div class="bg-green-50 rounded-lg p-4 border border-green-200">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center flex-shrink-0">
            <mat-icon class="text-white">check_circle</mat-icon>
          </div>
          <div class="flex-1 min-w-0">
            <p class="text-xs text-gray-600 mb-1">Câu trả lời đúng</p>
            <p class="text-2xl font-bold text-green-600">{{ data.correctQuestions }}</p>
          </div>
        </div>
      </div>

      <!-- Số câu sai -->
      <div class="bg-red-50 rounded-lg p-4 border border-red-200">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center flex-shrink-0">
            <mat-icon class="text-white">cancel</mat-icon>
          </div>
          <div class="flex-1 min-w-0">
            <p class="text-xs text-gray-600 mb-1">Câu trả lời sai</p>
            <p class="text-2xl font-bold text-red-600">{{ data.totalQuestions - data.correctQuestions }}</p>
          </div>
        </div>
      </div>

      <!-- Lần thi -->
      <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center flex-shrink-0">
            <mat-icon class="text-white">history</mat-icon>
          </div>
          <div class="flex-1 min-w-0">
            <p class="text-xs text-gray-600 mb-1">Lần thi</p>
            <p class="text-2xl font-bold text-purple-600">{{ data.attemptNumber }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Message động -->
    <div class="mb-6" 
         [ngClass]="data.passed ? 'bg-green-50 border-green-200' : 'bg-orange-50 border-orange-200'"
         class="border-l-4 p-4 rounded">
      <div class="flex items-start gap-3">
        <mat-icon [ngClass]="data.passed ? 'text-green-600' : 'text-orange-600'" class="mt-0.5">
          {{ data.passed ? 'celebration' : 'info' }}
        </mat-icon>
        <div class="flex-1">
          <p [ngClass]="data.passed ? 'text-green-800' : 'text-orange-800'" class="text-sm font-medium">
            <span *ngIf="data.passed">
              Bạn đã hoàn thành xuất sắc bài thi này! Chứng chỉ của bạn sẽ được cấp sau khi hoàn tất khóa học.
            </span>
            <span *ngIf="!data.passed">
              Đừng nản chí! Hãy xem lại tài liệu và thử lại. Bạn có thể thi lại bất cứ lúc nào.
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- Action buttons -->
    <div class="flex gap-3 flex-col sm:flex-row">
      <button 
        mat-raised-button 
        color="primary"
        (click)="goToCourses()"
        class="flex-1 !py-3 !px-6 !text-base !font-semibold !rounded-lg !shadow-md hover:!shadow-lg transition-all">
        <mat-icon class="mr-2">home</mat-icon>
        Về trang khóa học
      </button>
      
      <button 
        *ngIf="!data.passed"
        mat-stroked-button
        (click)="retakeExam()"
        class="flex-1 !py-3 !px-6 !text-base !font-semibold !rounded-lg !border-2 !border-blue-500 !text-blue-600 hover:!bg-blue-50 transition-all">
        <mat-icon class="mr-2">refresh</mat-icon>
        Thi lại
      </button>
    </div>
  </div>
</div>
