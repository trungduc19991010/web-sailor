<!-- Trang chủ theo mẫu VTC EDU -->
<div class="home-container">
  <!-- Loading spinner cho toàn bộ trang -->
  <div class="loading-container" *ngIf="homeDataLoading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Đang tải dữ liệu...</p>
  </div>

  <!-- Nội dung chính -->
  <div *ngIf="!homeDataLoading">
    <!-- Thống kê tổng quan -->
    <section class="stats-section" *ngIf="stats">
      <div class="container">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">
              <mat-icon>visibility</mat-icon>
            </div>
            <div class="stat-number">{{ stats.totalAccess | number }}</div>
            <div class="stat-label">TRUY CẬP</div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <mat-icon>school</mat-icon>
            </div>
            <div class="stat-number">{{ stats.totalStudents | number }}</div>
            <div class="stat-label">ĐÃ HỌC</div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <mat-icon>book</mat-icon>
            </div>
            <div class="stat-number">{{ stats.totalLessons | number }}</div>
            <div class="stat-label">BÀI HỌC</div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <mat-icon>person</mat-icon>
            </div>
            <div class="stat-number">{{ stats.totalInstructors | number }}</div>
            <div class="stat-label">GIẢNG VIÊN</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Lĩnh vực đào tạo -->
    <section class="fields-section" *ngIf="trainingFields.length > 0">
      <div class="container">
        <div class="section-header">
          <h2>Lĩnh vực đào tạo</h2>
          <p>Chúng tôi cung cấp hệ thống học đa dạng ngành nghề trong lĩnh vực</p>
        </div>

        <div class="fields-grid">
          <div class="field-card"
               *ngFor="let field of trainingFields; trackBy: trackByFieldId"
               (click)="onTrainingFieldClick(field)"
               role="button"
               tabindex="0">
            <div class="field-icon">
              <mat-icon>{{ field.icon }}</mat-icon>
            </div>
            <div class="field-info">
              <div class="course-count">{{ field.courseCount }} Khóa học</div>
              <div class="field-name">{{ field.name }}</div>
              <div class="field-description" *ngIf="field.description">
                {{ field.description }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Khóa học nổi bật -->
    <section class="featured-courses" *ngIf="featuredCourses.length > 0">
      <div class="container">
        <div class="section-header">
          <h2>Khóa học nổi bật</h2>
          <p>Các khóa học được đánh giá cao và nhiều người tham gia</p>
        </div>

        <div class="courses-grid">
          <mat-card class="course-card"
                    *ngFor="let course of featuredCourses; trackBy: trackByCourseId"
                    (click)="onCourseClick(course)">
            <div class="course-badge" *ngIf="course.featured">Nổi bật</div>
            <mat-card-header>
              <mat-card-title>{{ course.title }}</mat-card-title>
              <mat-card-subtitle>
                <div class="course-rating">
                  <span class="rating-stars">★★★★★</span>
                  <span class="rating-text">{{ course.rating }} ({{ course.reviews }})</span>
                </div>
                <div class="course-instructor" *ngIf="course.instructor">
                  <mat-icon>person</mat-icon>
                  {{ course.instructor }}
                </div>
              </mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
              <p>{{ course.description }}</p>
              <div class="course-meta">
                <span class="duration">
                  <mat-icon>schedule</mat-icon>
                  {{ course.duration }}
                </span>
                <span class="level" *ngIf="course.level">
                  <mat-icon>signal_cellular_alt</mat-icon>
                  {{ course.level }}
                </span>
                <span class="price" *ngIf="course.price === 0">
                  <mat-icon>money_off</mat-icon>
                  Miễn phí
                </span>
              </div>
            </mat-card-content>

            <mat-card-actions>
              <button mat-raised-button
                      color="primary"
                      (click)="onEnrollCourse(course); $event.stopPropagation()">
                Học ngay
              </button>
              <button mat-button
                      (click)="onCourseClick(course); $event.stopPropagation()">
                Chi tiết
              </button>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>
    </section>

    <!-- Nền tảng giáo dục số -->
    <section class="platform-features" *ngIf="platformFeatures.length > 0">
      <div class="container">
        <div class="section-header">
          <h2>NỀN TẢNG GIÁO DỤC ĐÀO TẠO SỐ</h2>
          <p>Website cung cấp các chức năng, thông tin giải pháp, dễ dàng sử dụng</p>
        </div>

        <div class="features-grid">
          <div class="feature-item"
               *ngFor="let feature of platformFeatures; trackBy: trackByFeatureId">
            <mat-icon class="feature-icon">{{ feature.icon }}</mat-icon>
            <h3>{{ feature.title }}</h3>
            <p>{{ feature.description }}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Refresh button (for development/testing) -->
    <section class="refresh-section" *ngIf="!homeDataLoading">
      <div class="container">
        <div class="refresh-actions">
          <button mat-raised-button
                  color="accent"
                  (click)="refreshHomeData()">
            <mat-icon>refresh</mat-icon>
            Làm mới dữ liệu
          </button>
        </div>
      </div>
    </section>
  </div>
</div>
