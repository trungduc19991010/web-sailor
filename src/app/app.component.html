<!-- Header giống VTC EDU -->
<header class="header">
  <div class="header-top">
    <div class="container">
      <div class="header-content">
        <div class="logo-section">
          <img src="assets/images/vosco-logo.png" alt="Vosco Logo" class="logo">
          <div class="title-section">
            <h1>TRUNG TÂM ĐÀO TẠO THUYỀN VIÊN VOSCO</h1>
            <p>VOSCO EDU là nền tảng đào tạo thuyền viên hàng đầu Việt Nam theo tiêu chuẩn quốc tế</p>
          </div>
        </div>
        <div class="auth-section">
          
          <!-- Hiển thị theo trạng thái đăng nhập (mutual exclusive) -->
          <ng-container *ngIf="isLoggedIn$ | async; else showLogin">
            <button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-trigger">
              <mat-icon>account_circle</mat-icon>
              <span>{{ currentUser?.userInfo?.fullName || currentUser?.userName || 'Người dùng' }}</span>
              <mat-icon>keyboard_arrow_down</mat-icon>
            </button>

            <mat-menu #userMenu="matMenu">
              <button mat-menu-item (click)="openUserProfileDialog()">
                <mat-icon>person</mat-icon>
                <span>Thông tin cá nhân</span>
              </button>
              <button mat-menu-item routerLink="/courses">
                <mat-icon>school</mat-icon>
                <span>Khóa học của tôi</span>
              </button>
              <button mat-menu-item>
                <mat-icon>settings</mat-icon>
                <span>Cài đặt</span>
              </button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="logout()">
                <mat-icon>logout</mat-icon>
                <span>Đăng xuất</span>
              </button>
            </mat-menu>
          </ng-container>
          <ng-template #showLogin>
            <button mat-raised-button color="primary" (click)="openLoginDialog()">
              Đăng nhập
            </button>
          </ng-template>
        </div>
      </div>
    </div>
  </div>

  <!-- Navigation Menu -->
  <nav class="navigation">
    <div class="container">
      <ul class="nav-menu">
        <li><a routerLink="/home" routerLinkActive="active">Trang chủ</a></li>
        <li><a routerLink="/introduction" routerLinkActive="active">Giới thiệu</a></li>
        <li class="dropdown">
          <a routerLink="/courses" routerLinkActive="active">Học tập</a>
          <ul class="dropdown-menu">
            <li><a routerLink="/courses">Khóa học của tôi</a></li>
          </ul>
        </li>
        <li><a routerLink="/guide" routerLinkActive="active">Hướng dẫn</a></li>
        <li><a href="#" routerLinkActive="active">Đối tác</a></li>
      </ul>

      <!-- Mobile menu button -->
      <button class="mobile-menu-btn" (click)="toggleMobileMenu()">
        <mat-icon>{{ mobileMenuOpen ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>

    <!-- Mobile menu -->
    <div class="mobile-menu" [class.active]="mobileMenuOpen">
      <ul>
        <li><a routerLink="/home" (click)="toggleMobileMenu()">Trang chủ</a></li>
        <li><a routerLink="/introduction" (click)="toggleMobileMenu()">Giới thiệu</a></li>
        <li class="mobile-dropdown">
          <span class="mobile-dropdown-title">Học tập</span>
          <ul class="mobile-submenu">
            <li><a routerLink="/courses" (click)="toggleMobileMenu()">Tất cả khóa học</a></li>
            <li><a routerLink="/courses" [queryParams]="{category: 'An toàn hàng hải'}" (click)="toggleMobileMenu()">An toàn hàng hải</a></li>
            <li><a routerLink="/courses" [queryParams]="{category: 'Điều khiển và vận hành tàu'}" (click)="toggleMobileMenu()">Điều khiển và vận hành tàu</a></li>
            <li><a routerLink="/courses" [queryParams]="{category: 'Máy tàu và kỹ thuật'}" (click)="toggleMobileMenu()">Máy tàu và kỹ thuật</a></li>
            <li><a routerLink="/courses" [queryParams]="{category: 'Tiếng Anh hàng hải'}" (click)="toggleMobileMenu()">Tiếng Anh hàng hải</a></li>
            <li><a routerLink="/courses" [queryParams]="{category: 'Y tế và sơ cứu hàng hải'}" (click)="toggleMobileMenu()">Y tế và sơ cứu hàng hải</a></li>
          </ul>
        </li>
        <li><a routerLink="/guide" (click)="toggleMobileMenu()">Hướng dẫn</a></li>
        <li><a href="#" (click)="toggleMobileMenu()">Đối tác</a></li>
        <li class="mobile-auth" *ngIf="!(isLoggedIn$ | async)">
          <button mat-raised-button color="primary" (click)="openLoginDialog(); toggleMobileMenu()">
            Đăng nhập
          </button>
        </li>
      </ul>
    </div>
  </nav>
</header>

<!-- Banner Section -->
<section class="banner-section">
  <div class="banner-container">
    <img src="assets/images/home-banner.png" alt="Home Banner" class="banner-image">
    <div class="banner-overlay">
      <div class="container">
        <div class="banner-content">
          <h2>Chào mừng đến với nền tảng đào tạo thuyền viên</h2>
          <p>Khám phá các khóa học chuẩn quốc tế STCW và IMO</p>
          <!-- <div class="search-box">
            <div class="search-container">
              <input type="text" class="search-input" placeholder="Tìm kiếm khóa học thuyền viên...">
              <button class="search-button" type="button">
                <mat-icon>search</mat-icon>
              </button>
            </div>
          </div> -->
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Nội dung chính -->
<main class="main-content">
  <router-outlet />
</main>

<!-- Toast Notifications -->
<app-toast-container></app-toast-container>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav" [class.visible]="isMobile">
  <div class="nav-tabs">
    <a routerLink="/home" routerLinkActive="active" class="nav-tab">
      <mat-icon>home</mat-icon>
      <span>Trang chủ</span>
    </a>
    <a routerLink="/courses" routerLinkActive="active" class="nav-tab">
      <mat-icon>school</mat-icon>
      <span>Khóa học</span>
    </a>
    <a routerLink="/guide" routerLinkActive="active" class="nav-tab">
      <mat-icon>help_outline</mat-icon>
      <span>Hướng dẫn</span>
    </a>
    <a href="#" class="nav-tab" (click)="openMobileMenu($event)">
      <mat-icon>more_horiz</mat-icon>
      <span>Thêm</span>
    </a>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div class="mobile-menu-overlay" [class.active]="mobileMenuOpen" (click)="closeMobileMenu()">
  <div class="mobile-menu-content" (click)="$event.stopPropagation()">
    <div class="mobile-menu-header">
      <h3>Menu</h3>
      <button mat-icon-button (click)="closeMobileMenu()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="mobile-menu-body">
      <div class="menu-section">
        <h4>Danh mục khóa học</h4>
        <ul class="menu-list">
          <li><a routerLink="/courses" [queryParams]="{category: 'An toàn hàng hải'}" (click)="closeMobileMenu()">
            <mat-icon>security</mat-icon>
            <span>An toàn hàng hải</span>
          </a></li>
          <li><a routerLink="/courses" [queryParams]="{category: 'Điều khiển và vận hành tàu'}" (click)="closeMobileMenu()">
            <mat-icon>directions_boat</mat-icon>
            <span>Điều khiển và vận hành tàu</span>
          </a></li>
          <li><a routerLink="/courses" [queryParams]="{category: 'Máy tàu và kỹ thuật'}" (click)="closeMobileMenu()">
            <mat-icon>engineering</mat-icon>
            <span>Máy tàu và kỹ thuật</span>
          </a></li>
          <li><a routerLink="/courses" [queryParams]="{category: 'Tiếng Anh hàng hải'}" (click)="closeMobileMenu()">
            <mat-icon>language</mat-icon>
            <span>Tiếng Anh hàng hải</span>
          </a></li>
          <li><a routerLink="/courses" [queryParams]="{category: 'Y tế và sơ cứu hàng hải'}" (click)="closeMobileMenu()">
            <mat-icon>medical_services</mat-icon>
            <span>Y tế và sơ cứu hàng hải</span>
          </a></li>
        </ul>
      </div>

      <div class="menu-section">
        <h4>Thông tin</h4>
        <ul class="menu-list">
          <li><a routerLink="/introduction" (click)="closeMobileMenu()">
            <mat-icon>info</mat-icon>
            <span>Giới thiệu</span>
          </a></li>
          <li><a href="#" (click)="closeMobileMenu()">
            <mat-icon>handshake</mat-icon>
            <span>Đối tác</span>
          </a></li>
          <li><a href="#" (click)="closeMobileMenu()">
            <mat-icon>contact_support</mat-icon>
            <span>Liên hệ</span>
          </a></li>
        </ul>
      </div>

      <div class="menu-section" *ngIf="!(isLoggedIn$ | async)">
        <button mat-raised-button color="primary" class="login-btn" (click)="openLoginDialog(); closeMobileMenu()">
          <mat-icon>login</mat-icon>
          Đăng nhập
        </button>
      </div>

      <div class="menu-section" *ngIf="isLoggedIn$ | async">
        <div class="user-info">
          <mat-icon>account_circle</mat-icon>
          <span>{{ currentUser?.userInfo?.fullName || currentUser?.userName || 'Người dùng' }}</span>
        </div>
        <ul class="menu-list">
          <li><a href="#" (click)="openUserProfileDialog(); closeMobileMenu()">
            <mat-icon>person</mat-icon>
            <span>Thông tin cá nhân</span>
          </a></li>
          <li><a routerLink="/courses" (click)="closeMobileMenu()">
            <mat-icon>school</mat-icon>
            <span>Khóa học của tôi</span>
          </a></li>
          <li><a href="#" (click)="closeMobileMenu()">
            <mat-icon>settings</mat-icon>
            <span>Cài đặt</span>
          </a></li>
          <li><a href="#" (click)="logout(); closeMobileMenu()">
            <mat-icon>logout</mat-icon>
            <span>Đăng xuất</span>
          </a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Thông tin liên hệ</h3>
        <p><mat-icon>phone</mat-icon> (84-225) 3731090</p>
        <p><mat-icon>fax</mat-icon> (84-225) 3731007</p>
        <p><mat-icon>language</mat-icon> www.vosco.vn</p>
        <p><mat-icon>email</mat-icon> pid&#64;vosco.vn</p>
        <p><mat-icon>email</mat-icon> drycargo&#64;vosco.vn</p>
      </div>

      <div class="footer-section">
        <h3>Trụ sở chính</h3>
        <p><mat-icon>business</mat-icon> Số 215 phố Lạch Tray, Phường Gia Viên, Thành phố Hải Phòng, Việt Nam</p>
      </div>

      <div class="footer-section">
        <h3>Đơn vị thành viên</h3>
        <p><a href="#">Trung tâm Huấn luyện Thuyền viên (VMTC)</a></p>
        <p><a href="#">Công ty Cung ứng nhân lực VOSCO (VCSC)</a></p>
        <p><a href="#">Công ty Thương mại & Dịch vụ VOSCO (VTSC)</a></p>
        <p><a href="#">Công ty Đại lý Tàu biển & Logistics VOSCO (VOSAL)</a></p>
      </div>

      <div class="footer-section">
        <h3>Dịch vụ</h3>
        <p><a href="#">Đào tạo thuyền viên</a></p>
        <p><a href="#">Chứng chỉ STCW</a></p>
        <p><a href="#">Vận tải biển</a></p>
        <p><a href="#">Logistics</a></p>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2024 VOSCO EDU - Công ty Cổ phần Vận tải biển Việt Nam. Tất cả quyền được bảo lưu.</p>
      <p>Vietnam Ocean Shipping Joint Stock Company</p>
    </div>
  </div>
</footer>
