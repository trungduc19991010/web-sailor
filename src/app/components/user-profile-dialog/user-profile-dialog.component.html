<!-- Dialog Header -->
<div class="flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700">
  <div class="flex items-center gap-3">
    <mat-icon class="text-white text-3xl">person</mat-icon>
    <h2 class="text-2xl font-bold text-white m-0">Thông tin cá nhân</h2>
  </div>
  <button 
    mat-icon-button 
    (click)="onClose()" 
    class="text-white hover:bg-blue-800 transition-colors"
    [disabled]="isSubmitting"
  >
    <mat-icon>close</mat-icon>
  </button>
</div>

<!-- Dialog Content -->
<div class="p-6">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex flex-col items-center justify-center py-12">
    <mat-spinner diameter="50" class="mb-4"></mat-spinner>
    <p class="text-gray-600 text-base">Đang tải thông tin...</p>
  </div>

  <!-- Form -->
  <form *ngIf="!isLoading" [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="space-y-5">
    <!-- Họ và tên -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-gray-700 mb-2">
        <mat-icon class="align-middle text-blue-600 mr-1" style="font-size: 18px; width: 18px; height: 18px;">badge</mat-icon>
        Họ và tên <span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        formControlName="fullName"
        placeholder="Nhập họ và tên của bạn"
        autocomplete="name"
        class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
        [class.border-red-500]="hasError('fullName')"
        [class.border-gray-300]="!hasError('fullName')"
      />
      <p *ngIf="hasError('fullName')" class="text-red-500 text-sm mt-1 flex items-center gap-1">
        <mat-icon class="text-base" style="font-size: 16px; width: 16px; height: 16px;">error</mat-icon>
        {{ getErrorMessage('fullName') }}
      </p>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-gray-700 mb-2">
        <mat-icon class="align-middle text-blue-600 mr-1" style="font-size: 18px; width: 18px; height: 18px;">email</mat-icon>
        Email <span class="text-red-500">*</span>
      </label>
      <input
        type="email"
        formControlName="email"
        placeholder="Nhập địa chỉ email của bạn"
        autocomplete="email"
        class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
        [class.border-red-500]="hasError('email')"
        [class.border-gray-300]="!hasError('email')"
      />
      <p *ngIf="hasError('email')" class="text-red-500 text-sm mt-1 flex items-center gap-1">
        <mat-icon class="text-base" style="font-size: 16px; width: 16px; height: 16px;">error</mat-icon>
        {{ getErrorMessage('email') }}
      </p>
    </div>

    <!-- Ghi chú -->
    <div class="form-group">
      <label class="block text-sm font-semibold text-gray-700 mb-2">
        <mat-icon class="align-middle text-blue-600 mr-1" style="font-size: 18px; width: 18px; height: 18px;">description</mat-icon>
        Ghi chú
      </label>
      <textarea
        formControlName="description"
        placeholder="Nhập ghi chú về bản thân (không bắt buộc)..."
        rows="4"
        autocomplete="off"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"
      ></textarea>
      <p class="text-gray-500 text-xs mt-1">Thông tin bổ sung về bạn</p>
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-3 pt-4">
      <button
        type="submit"
        mat-raised-button
        color="primary"
        [disabled]="isSubmitting || profileForm.invalid"
        class="flex-1 py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2"
      >
        <mat-spinner *ngIf="isSubmitting" diameter="20" class="inline-block"></mat-spinner>
        <mat-icon *ngIf="!isSubmitting">save</mat-icon>
        <span *ngIf="!isSubmitting">Lưu thay đổi</span>
        <span *ngIf="isSubmitting">Đang lưu...</span>
      </button>

      <button
        type="button"
        mat-button
        (click)="onClose()"
        [disabled]="isSubmitting"
        class="px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2"
      >
        <mat-icon>close</mat-icon>
        <span>Hủy</span>
      </button>
    </div>
  </form>
</div>
